<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Earnings Intelligence â€” Trendlyne Analyzer</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@300;400;500&family=Syne:wght@700;800&display=swap" rel="stylesheet"/>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: #0a0a0f; }
@keyframes fadeIn { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:translateY(0)} }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.4;transform:scale(.8)} }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }
@keyframes drift1 { 0%,100%{transform:translate(0,0)} 50%{transform:translate(-40px,40px)} }
@keyframes drift2 { 0%,100%{transform:translate(0,0)} 50%{transform:translate(30px,-30px)} }
input:focus { border-color: #e8ff47 !important; box-shadow: 0 0 0 3px rgba(232,255,71,0.1) !important; }
input { outline: none; }
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-thumb{background:#1e1e2e;border-radius:2px}
input[type="date"]::-webkit-calendar-picker-indicator{filter:invert(0.5);cursor:pointer}
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useRef, useEffect } = React;

const API_BASE = "https://earnings-intelligence-api.onrender.com";

const ANALYSIS_PROMPT = `You are an expert equity research analyst. Analyze the earnings call transcript below and respond ONLY with a complete HTML block (no markdown, no backticks, no explanation outside the HTML). Use the exact HTML structure below, filling in all sections with real analysis.

<div class="report">

<div class="section">
<div class="section-title">âš™ï¸ PART 1 â€” CORE FUNDAMENTAL ASSESSMENT</div>

<div class="item green">ğŸŸ¢ 1ï¸âƒ£ Management Tone & Confidence: [Optimistic/Cautious/Defensive â€” explain tone, key phrases used]</div>
<div class="item [green|red|grey]">ğŸŸ¢/ğŸ”´/âšª 2ï¸âƒ£ Business Performance: [Revenue, profit, margins, EPS, cash flow, debt YoY & QoQ]</div>
<div class="item [green|red|grey]">ğŸŸ¢/ğŸ”´/âšª 3ï¸âƒ£ Growth Drivers: [New products, markets, partnerships, R&D, acquisitions]</div>
<div class="item [green|red|grey]">ğŸŸ¢/ğŸ”´/âšª 4ï¸âƒ£ Risks & Challenges: [Competitive threats, macro, cost pressures, regulatory]</div>
<div class="item [green|red|grey]">ğŸŸ¢/ğŸ”´/âšª 5ï¸âƒ£ Industry & Market Outlook: [Sector trends, peer benchmarking]</div>
<div class="item [green|red|grey]">ğŸŸ¢/ğŸ”´/âšª 6ï¸âƒ£ Capital Allocation: [Dividends, buybacks, debt repayment, reinvestment]</div>
<div class="item [green|red|grey]">ğŸŸ¢/ğŸ”´/âšª 7ï¸âƒ£ Guidance & Forecast: [Management projections, credibility, visibility]</div>
<div class="item [green|red|grey]">ğŸŸ¢/ğŸ”´/âšª 8ï¸âƒ£ Sentiment Analysis: [Linguistic tone, confidence vs caution signals]</div>
<div class="rating-box [strong-buy|buy|hold|avoid]">9ï¸âƒ£ Investment Rating: [STRONG BUY / BUY / HOLD / AVOID] â€” [one line rationale]</div>
<div class="verdict-box">ğŸ”Ÿ Final Verdict: [2â€“3 sentences on long-term suitability]</div>
</div>

<div class="section">
<div class="section-title">ğŸ” PART 2 â€” STRATEGIC QUALITY CHECK</div>
<div class="check-grid">
<div class="check [yes|no|partial]">ROE/ROCE Trend: [Rising/Falling/Stable]</div>
<div class="check [yes|no|partial]">Management Integrity: [Strong/Concerns/Unclear]</div>
<div class="check [yes|no|partial]">Market Leadership: [Leader/Challenger/Niche]</div>
<div class="check [yes|no|partial]">Cash Flow Quality: [OCF/PAT â€” High/Medium/Low]</div>
<div class="check [yes|no|partial]">Sector Tailwinds: [Favorable/Neutral/Headwinds]</div>
<div class="check [yes|no|partial]">Scalability: [High/Medium/Limited]</div>
<div class="check [yes|no|partial]">Earnings Growth: [Consistent/Volatile/Declining]</div>
<div class="check [yes|no|partial]">Pricing Power: [Strong/Moderate/Weak]</div>
<div class="check [yes|no|partial]">COVID Resilience: [Resilient/Mixed/Impacted]</div>
<div class="check [yes|no|partial]">Shareholder Alignment: [Strong/Moderate/Weak]</div>
</div>
</div>

<div class="section">
<div class="section-title">âš¡ PART 3 â€” CATALYST TABLE</div>
<table class="catalyst-table">
<thead><tr><th>Catalyst</th><th>Signal</th><th>Evidence</th><th>Impact</th></tr></thead>
<tbody>
<tr class="[pos|neu|neg]"><td>1ï¸âƒ£ Operating Leverage & Margin Expansion</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>2ï¸âƒ£ Sectoral Tailwinds</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>3ï¸âƒ£ Product Mix Improvements</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>4ï¸âƒ£ Capacity Expansion Plans</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>5ï¸âƒ£ Promoter Confidence</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>6ï¸âƒ£ Geographical Expansion</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>7ï¸âƒ£ Supply-Side Consolidation</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>8ï¸âƒ£ Debt Reduction / ROE-ROCE</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>9ï¸âƒ£ Operational Efficiency</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>ğŸ”Ÿ Market Share Gains</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>11ï¸âƒ£ Corporate Actions</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
<tr class="[pos|neu|neg]"><td>12ï¸âƒ£ Governance / ESG</td><td>[Positive/Neutral/Negative]</td><td>[evidence]</td><td>[impact]</td></tr>
</tbody>
</table>
</div>

<div class="section">
<div class="section-title">ğŸ“‹ PART 4 â€” STRUCTURED SUMMARY</div>
<table class="summary-table">
<thead><tr><th>Category</th><th>Assessment</th><th>Key Evidence</th></tr></thead>
<tbody>
<tr><td>Management Tone</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Financial Trends</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Growth Drivers</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Risks</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Industry Position</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Capital Allocation</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Guidance</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Sentiment</td><td>[assessment]</td><td>[evidence]</td></tr>
<tr><td>Rating</td><td>[STRONG BUY/BUY/HOLD/AVOID]</td><td>[rationale]</td></tr>
</tbody>
</table>
<div class="positives"><strong>ğŸŸ¢ Positives:</strong> [list key positives]</div>
<div class="negatives"><strong>ğŸ”´ Negatives:</strong> [list key negatives]</div>
<div class="neutrals"><strong>âšª Neutrals:</strong> [list neutrals]</div>
</div>

<div class="section conclusion">
<div class="section-title">ğŸ¯ PART 5 â€” CONCLUSION</div>
<div class="conclusion-item"><strong>Overall Management Tone:</strong> [Bullish/Cautious/Defensive]</div>
<div class="conclusion-item"><strong>Key Triggers for Next Quarter:</strong> [triggers]</div>
<div class="conclusion-item"><strong>Risks Mentioned or Implied:</strong> [risks]</div>
<div class="verdict-final [strong-buy|buy|hold|avoid]"><strong>Verdict:</strong> [STRONG BUY / BUY OR ACCUMULATE / HOLD / WATCHLIST / AVOID]</div>
<div class="analyst-view"><strong>Analyst View:</strong> [5 sentences â€” conviction level, growth potential, valuation comfort zone. If Buy, mention triggers that would upgrade to Strong Buy.]</div>
</div>

</div>

Transcript:
---
{TRANSCRIPT}
---`;

async function analyzeWithAI(transcript, title) {
  const prompt = ANALYSIS_PROMPT.replace("{TRANSCRIPT}", transcript.slice(0, 80000));
  const response = await fetch(`${API_BASE}/api/analyze`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ prompt, title }),
  });
  if (!response.ok) throw new Error(`Analysis failed: ${response.status}`);
  const data = await response.json();
  return data.analysis || "";
}

function LogLine({ time, type, msg }) {
  const colors = { info:"#47ffe8", ok:"#2ed573", err:"#ff4757", ai:"#e8ff47", msg:"#c0c0d0" };
  return (
    <div style={{display:"flex",gap:12,fontSize:12,lineHeight:"1.8",fontFamily:"'DM Mono',monospace",animation:"fadeIn 0.3s ease"}}>
      <span style={{color:"#444",flexShrink:0}}>{time}</span>
      <span style={{color:colors[type]||colors.msg}}>{msg}</span>
    </div>
  );
}

function StatusBadge({ status }) {
  const s = {
    Done:      {bg:"rgba(46,213,115,0.12)",color:"#2ed573",border:"rgba(46,213,115,0.3)"},
    Error:     {bg:"rgba(255,71,87,0.12)", color:"#ff4757",border:"rgba(255,71,87,0.3)"},
    Analyzing: {bg:"rgba(232,255,71,0.12)",color:"#e8ff47",border:"rgba(232,255,71,0.3)"},
    Pending:   {bg:"rgba(255,255,255,0.05)",color:"#555",  border:"rgba(255,255,255,0.1)"},
  }[status] || {bg:"rgba(255,255,255,0.05)",color:"#555",border:"rgba(255,255,255,0.1)"};
  return (
    <span style={{fontSize:10,fontFamily:"'DM Mono',monospace",padding:"3px 10px",borderRadius:4,
      background:s.bg,color:s.color,border:`1px solid ${s.border}`,letterSpacing:1,
      textTransform:"uppercase",flexShrink:0}}>
      {status}
    </span>
  );
}

function App() {
  const today = new Date().toISOString().split("T")[0];
  const weekAgo = new Date(Date.now()-7*86400000).toISOString().split("T")[0];

  const [fromDate, setFromDate] = useState(weekAgo);
  const [toDate, setToDate]     = useState(today);
  const [email, setEmail]       = useState("");
  const [running, setRunning]   = useState(false);
  const [logs, setLogs]         = useState([]);
  const [videos, setVideos]     = useState([]);
  const [progress, setProgress] = useState(0);
  const [emailSent, setEmailSent] = useState(false);
  const logsRef = useRef(null);

  useEffect(() => {
    if (logsRef.current) logsRef.current.scrollTop = logsRef.current.scrollHeight;
  }, [logs]);

  const ts = () => new Date().toLocaleTimeString("en-US",{hour12:false});
  const addLog = (msg, type="msg") => setLogs(p=>[...p,{time:ts(),msg,type}]);
  const updateVideo = (idx, patch) => setVideos(p=>p.map((v,i)=>i===idx?{...v,...patch}:v));

  async function run() {
    if (!fromDate||!toDate||!email) return alert("Please fill all fields.");
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) return alert("Invalid email.");
    if (new Date(fromDate)>new Date(toDate)) return alert("From date must be before To date.");

    setRunning(true); setLogs([]); setVideos([]); setProgress(0); setEmailSent(false);

    addLog("Initializing earnings intelligence pipeline...", "info");
    addLog(`Date range: ${fromDate} â†’ ${toDate}`, "msg");
    addLog(`Email: ${email}`, "msg");

    try {
      addLog("Connecting to @trendlyne YouTube channel...", "info");
      setProgress(10);

      const vRes = await fetch(`${API_BASE}/api/fetch-videos`, {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({from_date:fromDate, to_date:toDate}),
      });
      if (!vRes.ok) throw new Error(`Failed to fetch videos: ${vRes.statusText}`);
      const vData = await vRes.json();

      if (!vData.videos?.length) {
        addLog("âš  No earnings call videos found in this date range.", "err");
        addLog("Try extending your date range.", "msg");
        setRunning(false); return;
      }

      addLog(`âœ“ Found ${vData.videos.length} earnings call(s)`, "ok");
      setVideos(vData.videos.map(v=>({...v,status:"Pending",analysis:""})));
      setProgress(20);

      const analyses = [];
      for (let i=0; i<vData.videos.length; i++) {
        const v = vData.videos[i];
        const pct = 20+Math.round(((i+1)/vData.videos.length)*65);
        addLog(`[${i+1}/${vData.videos.length}] Fetching transcript: ${v.title}`, "info");
        updateVideo(i, {status:"Analyzing"});

        try {
          // Fetch transcript via Supadata API (rotating keys)
          addLog(`Fetching transcript...`, "info");
          let transcript = "";

          const supadataKeys = [
            "sd_a96006039b0ec279e7ab80fb28098c82",
            "sd_9e4ca6a05a68b38c4e8dc5f04cb27a30",
            "sd_91298bda05c18ac2de5b58b31567aabe",
          ];

          for (const key of supadataKeys) {
            try {
              const sdRes = await fetch(
                `https://api.supadata.ai/v1/youtube/transcript?videoId=${v.video_id}&text=true`,
                { headers: { "x-api-key": key } }
              );
              if (sdRes.ok) {
                const sdData = await sdRes.json();
                transcript = sdData.content || sdData.transcript || sdData.text || "";
                if (transcript.length > 100) break;
              }
            } catch(e) { /* try next key */ }
          }

          if (!transcript) {
            addLog(`âš  No transcript for: ${v.title}`, "err");
            updateVideo(i, {status:"Error", analysis:"No transcript available."});
            analyses.push({...v, analysis:"No transcript available for this video."});
            continue;
          }

          addLog(`âœ“ Got transcript (${Math.round(transcript.length/1000)}k chars) â€” running AI analysis...`, "ai");
          const analysis = await analyzeWithAI(transcript, v.title);
          updateVideo(i, {status:"Done", analysis});
          analyses.push({...v, analysis});
          addLog(`âœ“ Analysis complete: ${v.title}`, "ok");
          setProgress(pct);

        } catch(err) {
          addLog(`âœ— Failed: ${v.title} â€” ${err.message}`, "err");
          updateVideo(i, {status:"Error", analysis:`Error: ${err.message}`});
          analyses.push({...v, analysis:`Analysis failed: ${err.message}`});
        }
      }

      setProgress(92);
      addLog("Sending email report...", "ai");
      const eRes = await fetch(`${API_BASE}/api/send-report`, {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({email, analyses, from_date:fromDate, to_date:toDate}),
      });
      if (!eRes.ok) throw new Error(`Email failed: ${eRes.statusText}`);

      setProgress(100);
      addLog(`âœ“ Report delivered to ${email}`, "ok");
      addLog("Pipeline complete! Check your inbox.", "info");
      setEmailSent(true);

    } catch(err) {
      addLog(`âœ— Fatal error: ${err.message}`, "err");
    } finally {
      setRunning(false);
    }
  }

  const inputStyle = {
    width:"100%", background:"rgba(255,255,255,0.03)", border:"1px solid #1e1e2e",
    borderRadius:6, padding:"11px 14px", color:"#f0f0f5",
    fontFamily:"'DM Mono',monospace", fontSize:13, transition:"all 0.2s"
  };
  const labelStyle = {
    display:"block", fontSize:10, letterSpacing:2, color:"#555",
    textTransform:"uppercase", marginBottom:8,
    fontFamily:"Syne,sans-serif", fontWeight:700
  };

  return (
    <div style={{
      minHeight:"100vh", background:"#0a0a0f", color:"#f0f0f5",
      fontFamily:"'DM Mono',monospace", padding:"0 0 60px", position:"relative", overflow:"hidden",
      backgroundImage:"linear-gradient(rgba(232,255,71,0.025) 1px,transparent 1px),linear-gradient(90deg,rgba(232,255,71,0.025) 1px,transparent 1px)",
      backgroundSize:"56px 56px"
    }}>
      {/* Glow orbs */}
      <div style={{position:"fixed",width:600,height:600,borderRadius:"50%",background:"#e8ff47",
        filter:"blur(120px)",top:-200,right:-200,opacity:0.08,pointerEvents:"none",
        animation:"drift1 12s ease-in-out infinite"}}/>
      <div style={{position:"fixed",width:400,height:400,borderRadius:"50%",background:"#47ffe8",
        filter:"blur(120px)",bottom:-100,left:-100,opacity:0.08,pointerEvents:"none",
        animation:"drift2 15s ease-in-out infinite"}}/>

      <div style={{maxWidth:820,margin:"0 auto",padding:"0 24px",position:"relative",zIndex:1}}>

        {/* Header */}
        <div style={{padding:"48px 0 32px",borderBottom:"1px solid #1e1e2e"}}>
          <div style={{display:"inline-flex",alignItems:"center",gap:8,
            background:"rgba(232,255,71,0.07)",border:"1px solid rgba(232,255,71,0.2)",
            borderRadius:4,padding:"4px 12px",fontSize:10,letterSpacing:2,color:"#e8ff47",
            textTransform:"uppercase",marginBottom:20,fontFamily:"Syne,sans-serif",fontWeight:700}}>
            <span style={{width:6,height:6,background:"#e8ff47",borderRadius:"50%",
              animation:"pulse 2s infinite",display:"inline-block"}}/>
            Open Source Â· Free Â· AI-Powered
          </div>
          <h1 style={{fontFamily:"'DM Serif Display',serif",fontSize:"clamp(34px,6vw,52px)",
            lineHeight:1.1,letterSpacing:-1,marginBottom:12}}>
            Earnings<br/><em style={{color:"#e8ff47"}}>Intelligence</em>
          </h1>
          <p style={{fontSize:13,color:"#555",lineHeight:1.7,maxWidth:480}}>
            Fetch @trendlyne earnings call transcripts, run deep AI equity analysis for free,
            and receive a comprehensive report in your inbox.
          </p>
        </div>

        {/* Stats */}
        <div style={{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:1,
          background:"#1e1e2e",border:"1px solid #1e1e2e",borderRadius:8,
          overflow:"hidden",margin:"32px 0"}}>
          {[["ğŸ“º","Source","@trendlyne"],["ğŸ¤–","AI Engine","Built-in Claude (Free)"],["ğŸ“§","Delivery","Email Report"]].map(([icon,label,val])=>(
            <div key={label} style={{background:"#111118",padding:"18px 20px",textAlign:"center"}}>
              <div style={{fontSize:22,marginBottom:6}}>{icon}</div>
              <div style={{fontSize:10,letterSpacing:2,color:"#555",textTransform:"uppercase",
                marginBottom:4,fontFamily:"Syne,sans-serif",fontWeight:700}}>{label}</div>
              <div style={{fontSize:12,color:"#e8ff47",fontWeight:600}}>{val}</div>
            </div>
          ))}
        </div>

        {/* Form */}
        <div style={{background:"#111118",border:"1px solid #1e1e2e",borderRadius:12,
          padding:32,marginBottom:24,position:"relative",overflow:"hidden"}}>
          <div style={{position:"absolute",top:0,left:0,right:0,height:1,
            background:"linear-gradient(90deg,transparent,rgba(232,255,71,0.4),transparent)"}}/>
          <div style={{fontSize:10,letterSpacing:3,color:"#555",textTransform:"uppercase",
            marginBottom:24,fontFamily:"Syne,sans-serif",fontWeight:700}}>
            <span style={{color:"#e8ff47"}}>//&nbsp;</span>Configure Analysis Run
          </div>

          <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16}}>
            <div>
              <label style={labelStyle}>FROM DATE</label>
              <input type="date" value={fromDate} onChange={e=>setFromDate(e.target.value)} style={inputStyle}/>
            </div>
            <div>
              <label style={labelStyle}>TO DATE</label>
              <input type="date" value={toDate} onChange={e=>setToDate(e.target.value)} style={inputStyle}/>
            </div>
          </div>

          <div style={{marginBottom:20}}>
            <label style={labelStyle}>RECIPIENT EMAIL</label>
            <input type="email" placeholder="analyst@example.com" value={email}
              onChange={e=>setEmail(e.target.value)} style={inputStyle}/>
          </div>

          {running && (
            <div style={{background:"rgba(255,255,255,0.05)",borderRadius:2,height:3,marginBottom:16,overflow:"hidden"}}>
              <div style={{height:"100%",background:"linear-gradient(90deg,#e8ff47,#47ffe8)",
                borderRadius:2,width:`${progress}%`,transition:"width 0.5s ease"}}/>
            </div>
          )}

          <button onClick={run} disabled={running} style={{
            width:"100%",padding:14,background:running?"rgba(232,255,71,0.4)":"#e8ff47",
            color:"#0a0a0f",border:"none",borderRadius:6,fontFamily:"Syne,sans-serif",
            fontSize:13,fontWeight:800,letterSpacing:2,textTransform:"uppercase",
            cursor:running?"not-allowed":"pointer",transition:"all 0.15s",
            display:"flex",alignItems:"center",justifyContent:"center",gap:8}}>
            <span style={{fontSize:16}}>{running?"â³":"âš¡"}</span>
            {running?"Analyzing...":"Run Earnings Analysis"}
          </button>
        </div>

        {/* Terminal */}
        {logs.length>0 && (
          <div style={{background:"#08080f",border:"1px solid #1e1e2e",borderRadius:8,
            overflow:"hidden",marginBottom:24}}>
            <div style={{padding:"10px 16px",background:"#111118",borderBottom:"1px solid #1e1e2e",
              display:"flex",alignItems:"center",gap:12,fontSize:11,color:"#555",
              fontFamily:"'DM Mono',monospace"}}>
              <div style={{display:"flex",gap:5}}>
                {["#ff5f57","#febc2e","#28c840"].map(c=>(
                  <div key={c} style={{width:10,height:10,borderRadius:"50%",background:c}}/>
                ))}
              </div>
              <span>earnings-analyzer.log</span>
            </div>
            <div ref={logsRef} style={{padding:"16px 20px",maxHeight:280,overflowY:"auto"}}>
              {logs.map((l,i)=><LogLine key={i} {...l}/>)}
              {running && <span style={{display:"inline-block",width:7,height:12,
                background:"#e8ff47",verticalAlign:"middle",
                animation:"blink 1s step-end infinite",marginLeft:6}}/>}
            </div>
          </div>
        )}

        {/* Results */}
        {videos.length>0 && (
          <div style={{marginBottom:24}}>
            <div style={{fontSize:10,letterSpacing:3,color:"#555",textTransform:"uppercase",
              marginBottom:14,fontFamily:"Syne,sans-serif",fontWeight:700}}>
              <span style={{color:"#2ed573"}}>//&nbsp;</span>Analysis Results
            </div>
            {videos.map((v,i)=>(
              <div key={i} style={{background:"#111118",border:"1px solid #1e1e2e",borderRadius:8,
                padding:"16px 20px",marginBottom:10,display:"flex",
                alignItems:"flex-start",gap:14}}>
                <span style={{fontSize:18,flexShrink:0,marginTop:2}}>
                  {v.status==="Done"?"âœ…":v.status==="Error"?"âŒ":v.status==="Analyzing"?"â³":"ğŸ“„"}
                </span>
                <div style={{flex:1,minWidth:0}}>
                  <div style={{fontFamily:"Syne,sans-serif",fontSize:13,fontWeight:700,
                    marginBottom:3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}>
                    {v.title}
                  </div>
                  <div style={{fontSize:11,color:"#555"}}>
                    Published: {v.published_date} Â· Duration: {v.duration}
                  </div>
                </div>
                <StatusBadge status={v.status}/>
              </div>
            ))}
          </div>
        )}

        {/* Success */}
        {emailSent && (
          <div style={{background:"rgba(46,213,115,0.06)",border:"1px solid rgba(46,213,115,0.2)",
            borderRadius:8,padding:"20px 24px",display:"flex",alignItems:"center",gap:16}}>
            <span style={{fontSize:28}}>âœ‰ï¸</span>
            <div>
              <div style={{fontFamily:"Syne,sans-serif",fontSize:14,fontWeight:800,
                color:"#2ed573",marginBottom:4}}>Report Delivered!</div>
              <div style={{fontSize:12,color:"#2ed573"}}>
                Full AI analysis sent to <strong>{email}</strong>
              </div>
            </div>
          </div>
        )}

      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
